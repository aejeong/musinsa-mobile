{"version":3,"sources":["js/products.js"],"names":["subTabs","document","querySelectorAll","productsWithBanner","init","addEventListener","e","resetProducts","settingProductsBanner","settingTabProducts","crrenTab","TABS","currentMainTabIdx","productsBannersIndex","map","hasBanner","idx","push","products","banners","renderRankingProducts","renderCodiProducts","renderUpdateProducts","productsWrapper","length","createElement","classList","add","createItemBox","insertAdjacentElement","isLastProductItem","createBannerBox","initSwiper","pagination","slidesPerView","el","codiWrapper","sub","currentSubIdx","createCodiItemBox","updateWrapper","item","isLast","i","element","bannerContainer","bannerHtml","slides","imgPosition","imgUrl","desc","insertAdjacentHTML","title","price","hasCoupon","salePercent","thumbnailPath","hasVideo","wrappers","forEach","ele","remove"],"mappings":"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","file":"products.556f8683.js","sourceRoot":"..","sourcesContent":["import { TABS } from '../index';\nimport { initSwiper } from './swiper';\nimport { currentMainTabIdx, currentSubIdx } from './tabs';\n\nlet subTabs = document.querySelectorAll('.sub-tabsWrapper');\nlet productsWithBanner = [];\n\ninit();\n\nfunction init(){\n  document.addEventListener('tabChanged', (e)=> {\n    resetProducts();\n\n  subTabs = document.querySelectorAll('.sub-tabsWrapper');\n  settingProductsBanner();\n  settingTabProducts();\n  })\n\n  settingProductsBanner();\n  settingTabProducts();\n}\n\nfunction settingProductsBanner(){\n  let crrenTab = TABS[currentMainTabIdx]\n  crrenTab.productsBannersIndex.map((hasBanner, idx)=>{\n    if(hasBanner){\n       productsWithBanner.push({'products': crrenTab.products[idx], 'banners': crrenTab.banners})\n    }else{\n      productsWithBanner.push({'products': crrenTab.products[idx], 'banners': []})\n    }\n  })\n}\n\nfunction settingTabProducts(){\n  switch (currentMainTabIdx) {\n    case 0:\n    renderRankingProducts();\n    break;\n    case 1:\n    renderCodiProducts();\n    break;\n    case 2:\n      renderUpdateProducts();\n      break;\n    default: renderRankingProducts();\n      break;\n  }\n}\n\nfunction renderRankingProducts(){\n  let productsWrapper;\n\n  for(let idx = productsWithBanner.length-1 ; idx >= 0; idx--) {\n     // products length 만큼 부모 wrapper 생성\n     productsWrapper = document.createElement('div');\n     productsWrapper.classList.add('products-wrapper');\n\n     // 해당 부모에 item 갯수만큼 item 요소 생성\n     createItemBox(productsWithBanner[idx].products, productsWrapper);\n      subTabs[0].insertAdjacentElement('afterend', productsWrapper)\n      \n      // products-wrapper에 들어간 item이 마지막 요소이면 banner 생성 \n      isLastProductItem(productsWithBanner[idx],idx) &&\n      createBannerBox(productsWithBanner[idx].banners, productsWrapper, idx);\n\n      // 배너별 스와이퍼 인스턴스 생성\n      initSwiper(`.swiper.banners-container.banner-${idx}`, {\n      pagination: {\n      slidesPerView: 1,\n      el: `.swiper-pagination.banners-pagination.banner-${idx}`\n    }\n  })\n  }\n}\n\nfunction renderCodiProducts(){\n  let codiWrapper;\n  let sub = currentSubIdx;\n\n  for(let idx = 0 ; idx < productsWithBanner.length; idx++) {\n     // products length 만큼 부모 wrapper 생성\n     codiWrapper = document.createElement('div');\n     codiWrapper.classList.add('products-wrapper','codi-wrapper');\n\n     // 해당 부모에 item 갯수만큼 item 요소 생성\n     createCodiItemBox(productsWithBanner[idx].products, codiWrapper);\n\n       subTabs[sub].insertAdjacentElement('afterend', codiWrapper)\n       sub++;\n       \n      // products-wrapper에 들어간 item이 마지막 요소이면 banner 생성 \n      isLastProductItem(productsWithBanner[idx],idx) &&\n      createBannerBox(productsWithBanner[idx].banners, codiWrapper, idx);\n\n      // 배너별 스와이퍼 인스턴스 생성\n      initSwiper(`.swiper.banners-container.banner-${idx}`, {\n      pagination: {\n      slidesPerView: 1,\n      el: `.swiper-pagination.banners-pagination.banner-${idx}`\n    }\n  })\n  }\n}\n\nfunction renderUpdateProducts(){\n  let updateWrapper;\n  let sub = currentSubIdx;\n  // to be continue...\n}\n\nfunction isLastProductItem(item){\n  let isLast;\n  \n  for(let i=0; i < item.products.length; i++){\n  isLast = item.banners.length > 0 && item.products.length -1 === i;\n  }\n  return isLast;\n}\n\nfunction createBannerBox(item, element, idx){\n  const bannerContainer = document.createElement('div');\n  bannerContainer.classList.add('banners-container', 'swiper',`banner-${idx}`);\n\n  const bannerHtml = () => {\n    let slides = '';\n    for(let i=0; i< item.length; i++){\n    slides += \n      `<div class=\"swiper-slide ${item[i].imgPosition}\">\n      <img src=${item[i].imgUrl} alt=\"banner image\"/>\n      <p>${item[i].desc}</p>\n      </div>`;\n     }\n\n     return slides;\n  }\n\n  bannerContainer.insertAdjacentHTML('afterbegin',\n  `<div class=\"banner-wrapper swiper-wrapper\">\n   ${bannerHtml()}\n   </div>\n   <div class=\"swiper-pagination banners-pagination banner-${idx}\"></div>\n  `\n  )\n  return element.insertAdjacentElement('afterend',bannerContainer)\n}\n\nfunction createItemBox(item ,element){\n  for(let idx=0; idx < item.length; idx ++){\n    element.insertAdjacentHTML('beforeend', `<div class='item-box'>\n    <img src=${item[idx].imgUrl} alt='item' />\n    <p class='item-desc'>\n      <span class='item-title'>${item[idx].title}</span>\n      <span class='item-price'>\n        <strong class='price'>${item[idx].price}</strong>\n        <span class='has-coupon'>${item[idx].hasCoupon ? '쿠폰' : ''}</span>\n        <span class='percent'>${item[idx].salePercent ? item[idx].salePercent : ''}</span>\n      </span>\n    </p>\n    </div>`)\n   }\n}\n\nfunction createCodiItemBox(item ,element){\n  for(let idx=0; idx < item.length; idx ++){\n    element.insertAdjacentHTML('beforeend', `<div class='item-box\n     ${ item[idx].thumbnailPath && 'has-thumbnail'}\n     ${ item[idx].hasVideo && 'has-video'}\n     '>\n    <img src=${item[idx].imgUrl} alt='item' />\n    ${ item[idx].price && item[idx].title &&\n    (`<p class='item-desc'>\n    ${ item[idx].thumbnailPath ? `<img src=${item[idx].thumbnailPath} alt='thumbnail'/>` : ''}\n      <span class='item-title'>${item[idx].title}</span>\n        <span class='item-price'>\n        <strong class='price'>${item[idx].price}</strong>\n        <span class='has-coupon'>${item[idx].hasCoupon ? '쿠폰' : ''}</span>\n        <span class='percent'>${item[idx].salePercent ? item[idx].salePercent : ''}</span>\n      </span>\n    </p>`)\n      }\n    </div>`)\n   }\n}\n\nfunction resetProducts(){\n  productsWithBanner = [];\n  const wrappers = document.querySelectorAll('.products-wrapper');\n  const banners = document.querySelectorAll('.banners-container');\n  if(wrappers.length > 0){\n    wrappers.forEach((ele,idx) => {\n      ele.remove();\n      })\n  }\n\n  if(banners.length >0){\n    banners.forEach((ele,idx) => {\n      ele.remove();\n      })\n  }\n}"]}